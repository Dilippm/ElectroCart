
<%- include('../layout/user/header.ejs')%>
<%- include('../layout/user/navbar.ejs')%>


<!-- Menu Toogle -->
<div class="menu-toggle">
    <a href="#">
        <i class="fa fa-bars"></i>
        <span>Menu</span>
    </a>
</div>
<!-- /Menu Toogle -->
</div>
</div>
<!-- /ACCOUNT -->
</div>
<!-- row -->
</div>
<!-- container -->
</div>
<!-- /MAIN HEADER -->
</header>
<!-- /HEADER -->

<!-- NAVIGATION -->
<nav id="navigation">
<!-- container -->
<div class="container">
<!-- responsive-nav -->
<div id="responsive-nav">
<!-- NAV -->
<ul class="main-nav nav navbar-nav">
<li class="active"><a href="/">Home</a></li>
<li class="active"><a href="/products">All Products</a></li>




</ul>
<!-- /NAV -->
</div>
<!-- /responsive-nav -->
</div>
<!-- /container -->
</nav>
<!-- /NAVIGATION -->

<!-- /SECTION -->
<!-- SECTION -->

<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- ASIDE -->
            <div id="aside" class="col-md-3">
                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Categories</h3>
                    <div class="checkbox-filter">

                        <div class="input-checkbox">
                            <input type="checkbox" id="category-1">
                            <label for="category-1">
                                <span></span>
                                Laptops
                                <small>(120)</small>
                            </label>
                        </div>

                        <div class="input-checkbox">
                            <input type="checkbox" id="category-2">
                            <label for="category-2">
                                <span></span>
                                Smartphones
                                <small>(740)</small>
                            </label>
                        </div>

                        

                       
                      

                        
                    </div>
                </div>
                <!-- /aside Widget -->

                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Price</h3>
                    <div class="price-filter">
                        <div id="price-slider"></div>
                        <div class="input-number price-min">
                            <input id="price-min" type="number">
                            <span class="qty-up">+</span>
                            <span class="qty-down">-</span>
                        </div>
                        <span>-</span>
                        <div class="input-number price-max">
                            <input id="price-max" type="number">
                            <span class="qty-up">+</span>
                            <span class="qty-down">-</span>
                        </div>
                    </div>
                </div>
                <!-- /aside Widget -->

              

                <!-- aside Widget -->
                <div class="aside">
                    <h3 class="aside-title">Top selling</h3>
                    <div class="product-widget">
                        <div class="product-img">
                            <img src="./img/product01.png" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">Category</p>
                            <h3 class="product-name"><a href="#">product name goes here</a></h3>
                            <h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
                        </div>
                    </div>

                    <div class="product-widget">
                        <div class="product-img">
                            <img src="./img/product02.png" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">Category</p>
                            <h3 class="product-name"><a href="#">product name goes here</a></h3>
                            <h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
                        </div>
                    </div>

                    <div class="product-widget">
                        <div class="product-img">
                            <img src="./img/product03.png" alt="">
                        </div>
                        <div class="product-body">
                            <p class="product-category">Category</p>
                            <h3 class="product-name"><a href="#">product name goes here</a></h3>
                            <h4 class="product-price">$980.00 <del class="product-old-price">$990.00</del></h4>
                        </div>
                    </div>
                </div>
                <!-- /aside Widget -->
            </div>
            <!-- /ASIDE -->

            <!-- STORE -->
            <div id="store" class="col-md-9">
                <!-- store top filter -->
                <div class="store-filter clearfix">
                    <div class="store-sort">
                        <label>
                            Sort By:
                            <select class="input-select">
                                <option value="0">Popular</option>
                                <option value="1">Position</option>
                            </select>
                        </label>

                        <label>
                            Show:
                            <select class="input-select">
                                <option value="0">20</option>
                                <option value="1">50</option>
                            </select>
                        </label>
                    </div>
                    <ul class="store-grid">
                        <li class="active"><i class="fa fa-th"></i></li>
                        <li><a href="#"><i class="fa fa-th-list"></i></a></li>
                    </ul>
                </div>
                <!-- /store top filter -->

                <!-- store products -->
                <div class="row">
                    <% data.forEach((data) => { %>
                    <div class="col-md-4 col-xs-6" style="margin-bottom: 50px;">
                      <div class="product">
                        <div class="product-img">
                          <img src="/productImages/<%- data.images[0]%>" height="300px" width="150px" alt="">
                        </div>
                        <div class="product-body">
                          <p class="product-category">Category</p>
                          <h3 class="product-name"><a href="/productview/<%= data._id %>"><%- data.productName %></a></h3>
                          <h4 class="product-price"><%= data.price %> <del class="product-old-price">â‚¹ <%= (data.price * 1.05).toFixed(2) %></del></h4>
                          <div class="product-rating">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                          </div>
                          <div class="product-btns">
                            <button class="add-to-wishlist" onclick="addtoWishlist('<%= data._id %>')">
                              <i class="fa fa-heart-o"></i>
                              <span class="tooltipp">Add to Wishlist</span>
                            </button>
                            <button class="quick-view">
                              <i class="fa fa-eye"></i>
                              <span class="tooltipp">quick view</span>
                            </button>
                          </div>
                        </div>
                        <div class="add-to-cart" onclick="addToCart('<%= data._id %>')">
                          <button class="add-to-cart-btn">
                            <i class="fa fa-shopping-cart"></i>
                            <i class="fa fa-shopping-cart"></i>
                            Add to cart
                          </button>
                        </div>
                      </div>
                    </div>
                    <% }) %>
                  </div>
                  
                    <!-- /product -->

                   
                    
                    

                  
                    <!-- product -->
                    

                    

                    

                  

                   
                </div>
                <!-- /store products -->

                <!-- store bottom filter -->
                <div class="store-filter clearfix">
                    <span class="store-qty">Showing 20-100 products</span>
                    <ul class="store-pagination">
                        <li class="active">1</li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#"><i class="fa fa-angle-right"></i></a></li>
                    </ul>
                </div>
                <!-- /store bottom filter -->
            </div>
            <!-- /STORE -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>

  <script>
    function addtoWishlist(proId) {
        console.log(proId);
        $.ajax({
            url: '/addWishlist/' + proId, // replace with the URL of your server-side script
            type: 'get', // use POST method

            success: (response) => {
                console.log(response);
                if (response.done) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Added to Whishlist',
                        showConfirmButton: false,
                        timer: 3000
                    })
                } else if (response.exist) {
                    Swal.fire({
                        position: 'top-end',

                        title: 'Already in Wishlist',
                        showConfirmButton: false,
                        timer: 3000
                    })
                } else {
                    location.href = '/login'
                }

            }
        })
    }

    function addToCart(proId) {
        console.log(proId);
        $.ajax({
            url: '/add-to-cart/' + proId, // replace with the URL of your server-side script
            type: 'get', // use POST method

            success: (response) => {
                console.log(response);
                if (response.done) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Added to Cart',
                        showConfirmButton: false,
                        timer: 1500
                    })
                } else if (response.exist) {
                    Swal.fire({
                        position: 'top-end',

                        title: 'Already in Cart',
                        showConfirmButton: false,
                        timer: 1500
                    })
                } else {
                    location.href = '/login'
                }

            }
        })
    }

</script>
<%- include('../layout/user/footer.ejs')%>